"use strict";(self.webpackChunkdocs_1=self.webpackChunkdocs_1||[]).push([[136],{3905:function(e,t,a){a.d(t,{Zo:function(){return d},kt:function(){return m}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=c(a),m=r,h=u["".concat(l,".").concat(m)]||u[m]||p[m]||s;return a?n.createElement(h,o(o({ref:t},d),{},{components:a})):n.createElement(h,o({ref:t},d))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=a.length,o=new Array(s);o[0]=u;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var c=2;c<s;c++)o[c]=a[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},2616:function(e,t,a){a.r(t),a.d(t,{assets:function(){return d},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return i},metadata:function(){return c},toc:function(){return p}});var n=a(7462),r=a(3366),s=(a(7294),a(3905)),o=["components"],i={sidebar_position:3},l="Send XC20 Assets to EVM",c={unversionedId:"xcm/building-with-xcm/send-xc20-evm",id:"xcm/building-with-xcm/send-xc20-evm",title:"Send XC20 Assets to EVM",description:"Overview",source:"@site/docs/xcm/building-with-xcm/send-xc20-evm.md",sourceDirName:"xcm/building-with-xcm",slug:"/xcm/building-with-xcm/send-xc20-evm",permalink:"/docs/xcm/building-with-xcm/send-xc20-evm",editUrl:"https://github.com/AstarNetwork/astar-docs/tree/main/docs/xcm/building-with-xcm/send-xc20-evm.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Create XC20 Assets",permalink:"/docs/xcm/building-with-xcm/create-xc20-assets"},next:{title:"XCM with dApps",permalink:"/docs/xcm/building-with-xcm/xcm-with-dapps"}},d={},p=[{value:"Overview",id:"overview",level:2},{value:"Import Assets on MetaMask",id:"import-assets-on-metamask",level:2},{value:"Send XC20 asset to EVM",id:"send-xc20-asset-to-evm",level:2},{value:"Step 1: Convert Address",id:"step-1-convert-address",level:3},{value:"Step 2: Send to EVM",id:"step-2-send-to-evm",level:2}],u={toc:p};function m(e){var t=e.components,i=(0,r.Z)(e,o);return(0,s.kt)("wrapper",(0,n.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"send-xc20-assets-to-evm"},"Send XC20 Assets to EVM"),(0,s.kt)("h2",{id:"overview"},"Overview"),(0,s.kt)("p",null,"Using XCM within the EVM environment is also simple as our network uses the XC20 interface, which maps the Assets pallet to an ERC20-compatible interface that EVM dApps can use."),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"XC20s and ERC20s are very similar, some distinct differences are to be aware of since XC20s are Substrate-based assets."),(0,s.kt)("p",{parentName:"blockquote"},"One of the XC20 specific features is the existence of asset's minimum-balance specific for each asset. Minimum-balance of an asset resembles an amount which is sufficient to allow the account's existence on the system without requiring any other existential-deposit. This feature's implication is that when transferring a certain amount of XC20 tokens, the amount actually transferred may be slightly greater in the case that the transfer would otherwise take the sender balance above zero but below the minimum balance. Must be greater than zero."),(0,s.kt)("p",{parentName:"blockquote"},"In addition, XC20s transactions done via the Substrate API won\u2019t be visible from EVM-based block explorers such as Blocksout. Only transactions done via the Ethereum API are visible through those explorers."),(0,s.kt)("p",{parentName:"blockquote"},"XC20s can interact through an ERC20 interface, so they have the additional benefit of being accessible from both the Substrate and Ethereum APIs. This ultimately provides greater flexibility for developers when working with these types of assets and allows seamless integrations with EVM-based smart contracts such as DEXs, and lending platforms, among others.")),(0,s.kt)("p",null,"First, let\u2019s approach this at a high level, and then move on to a more technical example for dApps. Let\u2019s say I want to move the KSM token from Kusama to ",(0,s.kt)("inlineCode",{parentName:"p"},"0xd2C6929A72e466213D1c2Df8359194784650A50e"),". From the Kusama side of things, the payload for sending the KSM tokens will be similar to the ones we used in the previous section. However, the ",(0,s.kt)("inlineCode",{parentName:"p"},"Beneficiary")," address (account ID) will be a mapped SS58 address of the recipient\u2019s EVM address as that is the only address format that XCM can accept. You can read ",(0,s.kt)("a",{parentName:"p",href:"https://medium.com/astar-network/using-astar-network-account-between-substrate-and-evm-656643df22a0"},"this article")," on how to create the mapped address. To keep things short, address mappings are:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"H160"),": ",(0,s.kt)("inlineCode",{parentName:"li"},"0x107bAe763DC63e0686C574FdE1B58115c7d19280")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"SS58"),": ",(0,s.kt)("inlineCode",{parentName:"li"},"Zag6jpFEU93xsEfczHbJucBUJAHMZFVsk4b3amvV5oXbJoo")," (with prefix 5 for Shiden/Astar)"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Public key"),": ",(0,s.kt)("inlineCode",{parentName:"li"},"0xa1363005871407f62f4b7e5752a7bc2934447699c08f4caf1b8c393287c0f502"))),(0,s.kt)("p",null,"To obtain the asset address for EVM, we need to get the token asset ID that we wish to use. In our case, we will be using KSM, which has the asset ID of ",(0,s.kt)("inlineCode",{parentName:"p"},"340282366920938463463374607431768211455"),". Now we need to convert the ID to hex and prefix it with ",(0,s.kt)("inlineCode",{parentName:"p"},"0xffffffff"),". The resulting address will be ",(0,s.kt)("inlineCode",{parentName:"p"},"0xffffffffFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"),". We can directly load this address with the ERC20 interface and use it within our Solidity smart contract or use it within MetaMask."),(0,s.kt)("h2",{id:"import-assets-on-metamask"},"Import Assets on MetaMask"),(0,s.kt)("p",null,"On the previous page, we create a new asset and generated our asset contract address. Now let's add that contract address to MetaMask:"),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"If you can't enter the decimals you haven't minted any assets. Make sure you minted your asset before going to this step.")),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"Make sure you are connected to ",(0,s.kt)("a",{parentName:"li",href:"https://app.gitbook.com/o/-LgGrgOEDyFYjYWIb1DT/s/-M8GVK5H7hOsGnYqg-7q-872737601/~/changes/aJQFFWQNMjlao1SSjj4a/integration/network-details"},"the network")," you created your token."),(0,s.kt)("li",{parentName:"ol"},"Click in your asset overview below on Import Tokens."),(0,s.kt)("li",{parentName:"ol"},"Add the following:",(0,s.kt)("ol",{parentName:"li"},(0,s.kt)("li",{parentName:"ol"},"Token Contract Address"),(0,s.kt)("li",{parentName:"ol"},"Token Symbol"),(0,s.kt)("li",{parentName:"ol"},"Token Decimals")))),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"Add Custom Token",src:a(6656).Z,width:"350",height:"589"})),(0,s.kt)("p",null,"As you can see from the above image, importing an asset from the created address will correctly read the asset and add it to our wallet."),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"Assets overview",src:a(2811).Z,width:"1213",height:"871"})),(0,s.kt)("h2",{id:"send-xc20-asset-to-evm"},"Send XC20 asset to EVM"),(0,s.kt)("h3",{id:"step-1-convert-address"},"Step 1: Convert Address"),(0,s.kt)("p",null,"This part will be improved later to make it more builders friendly but we will explain it step by step. To send your newly created asset to EVM you first need to know your native mapped wallet to your EVM account. You can get that address by following these steps:"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"Open our EVM to Substrate address ",(0,s.kt)("a",{parentName:"li",href:"https://hoonsubin.github.io/evm-substrate-address-converter/"},"converter"),"."),(0,s.kt)("li",{parentName:"ol"},"Switch to the H160 address scheme."),(0,s.kt)("li",{parentName:"ol"},"Copy your EVM address from MetaMask and paste it into the Input address field."),(0,s.kt)("li",{parentName:"ol"},"Your mapped native address will now be displayed.")),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"EVM to Substrate address convertor",src:a(7618).Z,width:"1002",height:"535"})),(0,s.kt)("h2",{id:"step-2-send-to-evm"},"Step 2: Send to EVM"),(0,s.kt)("p",null,"For this part, we need to go back to ",(0,s.kt)("a",{parentName:"p",href:"https://polkadot.js.org/apps/"},"Polkadot.js Apps"),". Make sure you are connected to the same network you created your asset."),(0,s.kt)("p",null,"In this guide, I want to send an amount of 1000 minted assets to my EVM account."),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"Navigate to ",(0,s.kt)("inlineCode",{parentName:"li"},"Developer -> Extrinsics")),(0,s.kt)("li",{parentName:"ol"},"Use the ",(0,s.kt)("inlineCode",{parentName:"li"},"assets -> transfer")," extrinsic."),(0,s.kt)("li",{parentName:"ol"},"Select the account that has permission to send the asset."),(0,s.kt)("li",{parentName:"ol"},"Enter your ",(0,s.kt)("inlineCode",{parentName:"li"},"asset id"),". See the previous page to know what asset id you need to enter For this guide, we are using ",(0,s.kt)("inlineCode",{parentName:"li"},"19992021"),"."),(0,s.kt)("li",{parentName:"ol"},"Enter your native address in the ",(0,s.kt)("inlineCode",{parentName:"li"},"Id")," field, the one you got with converting your EVM address to native."),(0,s.kt)("li",{parentName:"ol"},"The last part is the amount, I want to send ",(0,s.kt)("inlineCode",{parentName:"li"},"1000")," tokens to my address. In my case, I enter ",(0,s.kt)("inlineCode",{parentName:"li"},"1000")," with 18 zeros because of using 18 decimals."),(0,s.kt)("li",{parentName:"ol"},"Submit and sign the transaction.")),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"Overview",src:a(9145).Z,width:"1755",height:"616"})),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"XC20 on MetaMask",src:a(1711).Z,width:"1214",height:"879"})),(0,s.kt)("blockquote",null,(0,s.kt)("ul",{parentName:"blockquote"},(0,s.kt)("li",{parentName:"ul"},"We are still working closely with our block explorers to map the new assets and be visible in our explorers."),(0,s.kt)("li",{parentName:"ul"},"If you get an error with sending your tokens to another EVM account, please increase the gas fee."))))}m.isMDXComponent=!0},2811:function(e,t,a){t.Z=a.p+"assets/images/10-1f7c37665a1f1ccbc285d5d842aa38d9.png"},7618:function(e,t,a){t.Z=a.p+"assets/images/11-1ab645cf5804e67ac78939bc434704e6.png"},9145:function(e,t,a){t.Z=a.p+"assets/images/12-c91f2a5a1e67473a5446a4fd39a31a78.png"},1711:function(e,t,a){t.Z=a.p+"assets/images/13-5991370b5397674c791d5ebbb4edf5f1.png"},6656:function(e,t,a){t.Z=a.p+"assets/images/9-8baf6a17871057e3c97f4bd1a1482d1d.png"}}]);